{"version":3,"sources":["D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.component.html","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.component.scss","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.component.ts","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.module.ts","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.routes.ts","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.service.ts"],"names":[],"mappings":"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","file":"department-profile.module.chunk.js","sourcesContent":["module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"card\\\">\\r\\n      <div class=\\\"view hm-white-slight waves-light\\\" mdbRippleRadius>\\r\\n        <img src=\\\"assets/images/profile-placeholder.jpg\\\" class=\\\"img-fluid\\\" alt=\\\"\\\">\\r\\n        <a>\\r\\n          <div class=\\\"mask\\\"></div>\\r\\n        </a>\\r\\n      </div>\\r\\n      <div class=\\\"card-body\\\">\\r\\n        <form [formGroup]=\\\"profileForm\\\" (ngSubmit)=\\\"updateProfile(profileForm.value)\\\">\\r\\n          <div class=\\\"alert-danger\\\" *ngIf=\\\"error\\\">{{errorMsg}}</div>\\r\\n          <div class=\\\"alert-success\\\" *ngIf=\\\"success\\\">{{successMsg}}</div>        \\r\\n          <div class=\\\"md-form\\\">\\r\\n            <i class=\\\"fa fa-user-o prefix grey-text\\\"></i>\\r\\n            <input type=\\\"text\\\" id=\\\"firstName\\\" name=\\\"firstName\\\" formControlName=\\\"firstName\\\" class=\\\"form-control\\\" mdbActive>\\r\\n            <label for=\\\"Name\\\">Name</label>\\r\\n          </div>             \\r\\n          <div class=\\\"text-center\\\">\\r\\n            <button  type=\\\"submit\\\" class=\\\"btn btn-default waves-light\\\" mdbRippleRadius [disabled]=\\\"!profileForm.valid || activeRequest\\\">Update</button>\\r\\n          </div>\\r\\n        </form>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  \"\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.component.html\n// module id = ../../../../../src/app/hirundo/department/department-profile/department-profile.component.html\n// module chunks = department-profile.module","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.component.scss\n// module id = ../../../../../src/app/hirundo/department/department-profile/department-profile.component.scss\n// module chunks = department-profile.module","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { DepartmentProfileService } from './department-profile.service';\r\nimport { AuthGuard } from '../../../shared/guard/auth.guard';\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './department-profile.component.html',\r\n  styleUrls: ['./department-profile.component.scss']\r\n})\r\nexport class DepartmentProfileComponent implements OnInit {\r\n  profileForm: FormGroup;\r\n  User: any = {};\r\n  ProfileData: any;\r\n  activeRequest: boolean = false;\r\n  error: boolean = false;\r\n  errorMsg: string = '';\r\n  success: boolean = false;\r\n  successMsg: string = '';\r\n  constructor(private profileService: DepartmentProfileService, private authGuard: AuthGuard) { }\r\n\r\n  ngOnInit() {\r\n    this.ProfileData = this.authGuard.getCurrentUser();\r\n    console.log('this.ProfileData', this.ProfileData);\r\n    if (this.ProfileData) {\r\n      this.createProfileForm();\r\n    }\r\n  }\r\n\r\n  private createProfileForm() {\r\n    this.profileForm = new FormGroup({\r\n      firstName: new FormControl(this.ProfileData.firstName, Validators.required),\r\n    });\r\n  }\r\n\r\n  updateProfile(user): void {\r\n    this.activeRequest = true;\r\n    this.User.firstName = user.firstName;\r\n    this.profileService.updateProfile(this.User).then(data => {\r\n      this.activeRequest = false;\r\n      this.ProfileData = data.data;\r\n      localStorage.setItem('currentUser', JSON.stringify(data.data));\r\n      if (this.ProfileData) {\r\n        this.createProfileForm();\r\n      }\r\n      this.success = true;\r\n      this.successMsg = data.message;\r\n      setTimeout(() => {\r\n        this.success = false;\r\n        this.successMsg = '';\r\n      }, 4000);\r\n    }).catch(error => {\r\n      this.activeRequest = false;\r\n      this.error = true;\r\n      this.errorMsg = error;\r\n      setTimeout(() => {\r\n        this.error = false;\r\n        this.errorMsg = '';\r\n      }, 4000);\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { DepartmentProfileComponent } from './department-profile.component';\r\nimport { DepartmentProfileRouting } from './department-profile.routes';\r\nimport { DepartmentProfileService } from './department-profile.service'\r\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    DepartmentProfileRouting,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MDBBootstrapModule\r\n  ],\r\n  declarations: [DepartmentProfileComponent],\r\n  providers: [\r\n    DepartmentProfileService\r\n  ]\r\n})\r\nexport class DepartmentProfileModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.module.ts","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { DepartmentProfileComponent } from './department-profile.component';\r\n\r\nconst routes: Routes = [\r\n    { path: '', component: DepartmentProfileComponent }\r\n];\r\n\r\n\r\nexport const DepartmentProfileRouting: ModuleWithProviders = RouterModule.forChild(routes); \r\n\n\n\n// WEBPACK FOOTER //\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.routes.ts","import { Injectable } from '@angular/core';\r\nimport { Http, Response } from '@angular/http';\r\nimport 'rxjs/add/operator/toPromise';\r\n@Injectable()\r\nexport class DepartmentProfileService {\r\n\r\n  constructor(private http: Http) { }\r\n  \r\n  updateProfile(opts): Promise<any> {\r\n    let url = \"api/user\";\r\n    return this.http.put(url, opts).toPromise()\r\n      .then(this.extractData)\r\n      .catch(this.handleErrorPromise);\r\n  }\r\n\r\n  updateProfilePicture(opts): Promise<any> {\r\n    let url = \"api/user/picture/upload\";\r\n    return this.http.post(url, opts).toPromise()\r\n      .then(this.extractData)\r\n      .catch(this.handleErrorPromise);\r\n  }\r\n\r\n  public extractData(res: Response) {\r\n    let body = res.json();\r\n    if (body.hasOwnProperty('error')) {\r\n      if (body.error.message === 'Token is required') {\r\n        this.logout();\r\n      } else {\r\n        return Promise.resolve(body || {});\r\n      }\r\n    } else {\r\n      return Promise.resolve(body || {});\r\n    }\r\n  }\r\n\r\n  private handleErrorPromise(error: Response | any) {\r\n    let body = error.json();\r\n    if (error.status === 400 || error.status === 401) {\r\n      return Promise.reject(body.message || error);\r\n    }\r\n    else {\r\n      this.logout();\r\n    }\r\n  }\r\n\r\n  private logout() {\r\n    localStorage.removeItem('isLoggedin');\r\n    localStorage.removeItem('currentUser');\r\n    localStorage.removeItem('token');\r\n    document.cookie = \"token=\" + '';\r\n    window.location.href = '/';\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/department/department-profile/department-profile.service.ts"],"sourceRoot":"webpack:///"}