{"version":3,"sources":["D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.component.html","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.component.scss","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.component.ts","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.module.ts","D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.routes.ts"],"names":[],"mappings":"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","file":"profile.module.chunk.js","sourcesContent":["module.exports = \"<div class=\\\"container-fluid profile-container\\\">\\r\\n    <div class=\\\"alert-danger\\\" *ngIf=\\\"error\\\">{{errorMsg}}</div>\\r\\n    <div class=\\\"alert-success\\\" *ngIf=\\\"success\\\">{{successMsg}}</div>\\r\\n    <div class=\\\"card\\\" *ngIf=\\\"ProfileData\\\">\\r\\n        <div class=\\\"view hm-white-slight waves-light\\\" mdbRippleRadius>\\r\\n            <img *ngIf=\\\"!previewImage && !ProfileData.picture.original\\\" src=\\\"assets/images/profile-placeholder.jpg\\\" class=\\\"img-fluid\\\"\\r\\n                alt=\\\"\\\">\\r\\n            <img *ngIf=\\\"previewImage\\\" [src]=\\\"previewImage\\\" class=\\\"img-fluid\\\" alt=\\\"\\\">\\r\\n            <img *ngIf=\\\"!previewImage && ProfileData.picture.original\\\" [src]=\\\"ProfileData.picture.original\\\" class=\\\"img-fluid\\\" alt=\\\"\\\">\\r\\n            <a>\\r\\n                <div class=\\\"mask\\\"></div>\\r\\n            </a>\\r\\n        </div>\\r\\n        <div class=\\\"btn-container d-flex justify-content-between\\\">\\r\\n            <label class=\\\"cabinet btn\\\">\\r\\n                <i class=\\\"far fa-image\\\"></i>\\r\\n                <input type=\\\"file\\\" class=\\\"file\\\" #myInput name=\\\"myImage\\\" accept=\\\"image/*\\\" (change)=\\\"fileChangeEvent($event)\\\" placeholder=\\\"Upload file...\\\"\\r\\n                />\\r\\n            </label>\\r\\n            <button type=\\\"submit\\\" class=\\\"btn btn-default waves-light\\\" mdbRippleRadius (click)=\\\"uploadProfilePic()\\\" ng-disabled=\\\"uploadPicRequest\\\">\\r\\n                <i class=\\\"fas fa-upload\\\"></i>\\r\\n            </button>\\r\\n        </div>\\r\\n        <div class=\\\"card-body\\\">\\r\\n            <form [formGroup]=\\\"profileForm\\\" (ngSubmit)=\\\"updateProfile(profileForm.value)\\\">\\r\\n                <div class=\\\"md-form\\\">\\r\\n                    <i class=\\\"fa fa-user-o prefix grey-text\\\"></i>\\r\\n                    <input type=\\\"text\\\" id=\\\"firstName\\\" name=\\\"firstName\\\" formControlName=\\\"firstName\\\" class=\\\"form-control\\\" mdbActive>\\r\\n                    <label for=\\\"Name\\\">First Name</label>\\r\\n                </div>\\r\\n                <div class=\\\"md-form\\\">\\r\\n                    <i class=\\\"fa fa-user-o prefix grey-text\\\"></i>\\r\\n                    <input type=\\\"text\\\" id=\\\"lastName\\\" name=\\\"lastName\\\" formControlName=\\\"lastName\\\" class=\\\"form-control\\\" mdbActive>\\r\\n                    <label for=\\\"Name\\\">Last Name</label>\\r\\n                </div>\\r\\n                <div class=\\\"text-center\\\">\\r\\n                    <button type=\\\"submit\\\" class=\\\"btn btn-default waves-light\\\" mdbRippleRadius [disabled]=\\\"!profileForm.valid || activeRequest\\\">Update</button>\\r\\n                </div>\\r\\n            </form>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.component.html\n// module id = ../../../../../src/app/hirundo/waiter/profile/profile.component.html\n// module chunks = profile.module","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.component.scss\n// module id = ../../../../../src/app/hirundo/waiter/profile/profile.component.scss\n// module chunks = profile.module","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { ProfileService } from './profile.service';\r\nimport { AuthGuard } from '../../../shared/guard/auth.guard';\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.scss']\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  @ViewChild('myInput')\r\n  myInputVariable: any;\r\n  profileForm: FormGroup;\r\n  User: any = {};\r\n  ProfileData: any;\r\n  activeRequest: boolean = false;\r\n  error: boolean = false;\r\n  errorMsg: string = '';\r\n  success: boolean = false;\r\n  successMsg: string = '';\r\n  uploadPicRequest: boolean = false;\r\n  previewImage = '';\r\n  public profilePic;\r\n  constructor(private profileService: ProfileService, private authGuard: AuthGuard) { }\r\n\r\n  ngOnInit() {\r\n    this.profileService.getCurrentUser().then(data => {\r\n      this.ProfileData = data.data;\r\n      if (this.ProfileData) {\r\n        this.createProfileForm();\r\n      }\r\n    }).catch(error => {\r\n    });\r\n  }\r\n  \r\n  private createProfileForm() {\r\n    this.profileForm = new FormGroup({\r\n      firstName: new FormControl(this.ProfileData.firstName, Validators.required),\r\n      lastName: new FormControl(this.ProfileData.lastName, Validators.required),\r\n    });\r\n  }\r\n\r\n  updateProfile(user): void {\r\n    this.activeRequest = true;\r\n    this.User.firstName = user.firstName;\r\n    this.User.lastName = user.lastName;\r\n    this.profileService.updateProfile(this.User).then(data => {\r\n      window.scrollTo(0, 0);\r\n      this.activeRequest = false;\r\n      this.ProfileData = data.data;\r\n      localStorage.setItem('currentUser', JSON.stringify(data.data));\r\n      if (this.ProfileData) {\r\n        this.createProfileForm();\r\n      }\r\n      this.success = true;\r\n      this.successMsg = data.message;\r\n      setTimeout(() => {\r\n        this.success = false;\r\n        this.successMsg = '';\r\n      }, 4000);\r\n    }).catch(error => {\r\n      window.scrollTo(0, 0);\r\n      this.activeRequest = false;\r\n      this.error = true;\r\n      this.errorMsg = error;\r\n      setTimeout(() => {\r\n        this.error = false;\r\n        this.errorMsg = '';\r\n      }, 4000);\r\n    });\r\n  }\r\n\r\n  public fileChangeEvent(fileInput: any) {\r\n    if (fileInput.target.files && fileInput.target.files[0]) {\r\n      var reader = new FileReader();\r\n      reader.onload = (e: any) => {\r\n        this.previewImage = e.target.result;\r\n        var datauri = e.target.result.split(',')[1];\r\n        var binary = atob(datauri);\r\n        var array = [];\r\n        for (var i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i));\r\n        }\r\n        //Convert the binary format of image into image file object to upload\r\n        this.profilePic = new File([new Uint8Array(array)], 'profile_pic.jpg', {\r\n          type: 'image/jpg'\r\n        });\r\n      }\r\n      reader.readAsDataURL(fileInput.target.files[0]);\r\n    }\r\n  }\r\n\r\n  public uploadProfilePic() {\r\n    let opts = {\r\n      picture: this.profilePic\r\n    }\r\n    this.uploadPicRequest = true;\r\n    this.profileService.updateProfilePicture(opts).then(data => {\r\n      window.scrollTo(0, 0);\r\n      this.uploadPicRequest = false;\r\n      localStorage.setItem('currentUser', JSON.stringify(data.data));      \r\n      this.profilePic = '';\r\n      this.myInputVariable.nativeElement.value = \"\";\r\n      this.success = true;\r\n      this.successMsg = data.message;\r\n      setTimeout(() => {\r\n        this.success = false;\r\n        this.successMsg = '';\r\n      }, 4000);\r\n    }).catch(error => {\r\n      window.scrollTo(0, 0);\r\n      this.uploadPicRequest = false;\r\n      this.error = true;\r\n      this.errorMsg = error;\r\n      setTimeout(() => {\r\n        this.error = false;\r\n        this.errorMsg = '';\r\n      }, 4000);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { ProfileComponent } from './profile.component';\r\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\r\nimport { ProfileRouting } from './profile.routes'\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    ProfileRouting,\r\n    MDBBootstrapModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [ProfileComponent]\r\n})\r\nexport class ProfileModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.module.ts","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ProfileComponent } from './profile.component';\r\n\r\nconst routes: Routes = [\r\n    { path: '', component: ProfileComponent }\r\n];\r\n\r\n\r\nexport const ProfileRouting: ModuleWithProviders = RouterModule.forChild(routes); \r\n\n\n\n// WEBPACK FOOTER //\n// D:/project/htdocs/Hirundo-new/web-hirundo/src/app/hirundo/waiter/profile/profile.routes.ts"],"sourceRoot":"webpack:///"}