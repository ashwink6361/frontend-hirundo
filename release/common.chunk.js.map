{"version":3,"sources":["/home/huulke/Documents/projects/hirundo/web-hirundo/src/app/hirundo/waiter/dashboard/dashboard.service.ts","/home/huulke/Documents/projects/hirundo/web-hirundo/src/app/hirundo/waiter/profile/profile.service.ts"],"names":[],"mappings":"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","file":"common.chunk.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Http, Response } from '@angular/http';\nimport { GlobalService } from '../../global.service';\nimport 'rxjs/add/operator/toPromise';\n@Injectable()\nexport class DashboardService {\n\n  constructor(private http: Http, private globalService: GlobalService) { }\n  getRooms(): Promise<any> {\n    let url = '/api/rooms';\n    return this.http.get(url).toPromise()\n      .then(this.globalService.extractData)\n      .catch(this.globalService.handleErrorPromise);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/huulke/Documents/projects/hirundo/web-hirundo/src/app/hirundo/waiter/dashboard/dashboard.service.ts","import { Injectable } from '@angular/core';\nimport { Http, Response, Headers,RequestOptions } from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\n\n@Injectable()\nexport class ProfileService {\n\n  constructor(private http: Http) { }\n\n  updateProfile(opts): Promise<any> {\n    let url = \"api/user\";\n    return this.http.put(url, opts).toPromise()\n      .then(this.extractData)\n      .catch(this.handleErrorPromise);\n  }\n\n  getCurrentUser(): Promise<any> {\n    let url = \"api/user\";\n    return this.http.get(url).toPromise()\n      .then(this.extractData)\n      .catch(this.handleErrorPromise);\n  }\n\n  updateProfilePicture(opts): Promise<any> {\n    let url = \"api/user/picture/upload\";\n    var fd = new FormData();\n    for (var key in opts) {\n      fd.append(key, opts[key]);\n    }\n    var headers = new Headers();\n    headers.append('Authorization', 'Bearer ' + this.getCookie('session'));\n    headers.append('privatekey', 'BbZJjyoXAdr8BUZuiKKARWimKfrSmQ6fv8kZ7OFfc');\n    let options = new RequestOptions({ headers: headers });\n    return this.http.post('http://localhost:5051/' + url, fd, options).toPromise()\n      .then(this.extractData)\n      .catch(this.handleErrorPromise);\n  }\n\n  getCookie(name) {\n    var value = \"; \" + document.cookie;\n    var parts = value.split(\"; \" + name + \"=\");\n    if (parts.length == 2) return parts.pop().split(\";\").shift();\n  }\n\n  public extractData(res: Response) {\n    let body = res.json();\n    if (body.hasOwnProperty('error')) {\n      if (body.error.message === 'Token is required') {\n        this.logout();\n      } else {\n        return Promise.resolve(body || {});\n      }\n    } else {\n      return Promise.resolve(body || {});\n    }\n  }\n\n  private handleErrorPromise(error: Response | any) {\n    let body = error.json();\n    if (error.status === 400 || error.status === 401) {\n      return Promise.reject(body.message || error);\n    }\n    else {\n      return Promise.reject(body.message || error);\n    }\n  }\n\n  private logout() {\n    localStorage.removeItem('isLoggedin');\n    localStorage.removeItem('currentUser');\n    localStorage.removeItem('token');\n    document.cookie = \"token=\" + '';\n    window.location.href = '/';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/huulke/Documents/projects/hirundo/web-hirundo/src/app/hirundo/waiter/profile/profile.service.ts"],"sourceRoot":"webpack:///"}